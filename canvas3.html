<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas Stickers</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
        canvas {
            display: block;
        }
        .sticker-container {
            position: absolute;
            top: 50px;
            left: 50px;
            display: none;
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid #ccc;
            padding: 10px;
            max-height: 300px;
            overflow-y: auto;
        }
        .sticker-option {
            width: 100px;
            height: 100px;
            margin: 5px;
            cursor: pointer;
        }
        .sticker-button {
            position: absolute;
            top: 10px;
            left: 10px;
            padding: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div class="sticker-container" id="stickerContainer">
        <div class="sticker-option" data-sticker="1">
            <img src="1.png" alt="Sticker 1" style="width: 100%; height: 100%; object-fit: cover;">
        </div>
        <!-- Add more stickers here -->
        <div class="sticker-option" data-sticker="2">
            <img src="2.png" alt="Sticker 2" style="width: 100%; height: 100%; object-fit: cover;">
        </div>
    </div>
    <button class="sticker-button" id="openStickerContainer">Select Sticker</button>

    <script>
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");
        const stickerContainer = document.getElementById("stickerContainer");
        const openStickerContainerButton = document.getElementById("openStickerContainer");

        // Sticker data
        const stickers = [];

        // Preload images (Add more stickers if necessary)
        const preloadStickerImages = ["1.png", "2.png"]; // Add more sticker sources
        preloadStickerImages.forEach((src, index) => {
            const img = new Image();
            img.src = src;
            img.onload = () => {
                stickers.push({
                    x: 100,
                    y: 100,
                    width: 100,
                    height: 100,
                    scale: 1,
                    rotation: 0,
                    image: img,
                    isActive: false,
                });
                drawAllStickers(); // Redraw canvas after loading
            };
        });

        // Responsive canvas
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            drawAllStickers();
        }
        window.addEventListener("resize", resizeCanvas);
        resizeCanvas();

        // Draw all stickers
        function drawAllStickers() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            stickers.forEach(sticker => drawSticker(sticker));
        }

        // Draw individual sticker
        function drawSticker(sticker) {
            if (!sticker.image) return; // Skip if the image is not loaded
            ctx.save();
            ctx.translate(sticker.x, sticker.y);
            ctx.rotate((sticker.rotation * Math.PI) / 180);
            ctx.scale(sticker.scale, sticker.scale);
            ctx.drawImage(
                sticker.image,
                -sticker.width / 2,
                -sticker.height / 2,
                sticker.width,
                sticker.height
            );
            ctx.restore();
        }

        // Example interaction logic for moving stickers
        canvas.addEventListener("pointerdown", (e) => {
            const x = e.clientX;
            const y = e.clientY;
            stickers.forEach(sticker => {
                const withinX = x >= sticker.x && x <= sticker.x + sticker.width;
                const withinY = y >= sticker.y && y <= sticker.y + sticker.height;
                sticker.isActive = withinX && withinY;
            });
        });

        canvas.addEventListener("pointermove", (e) => {
            const x = e.clientX;
            const y = e.clientY;
            stickers.forEach(sticker => {
                if (sticker.isActive) {
                    sticker.x = x;
                    sticker.y = y;
                    drawAllStickers();
                }
            });
        });

        canvas.addEventListener("pointerup", () => {
            stickers.forEach(sticker => (sticker.isActive = false));
        });

        // Open the sticker container when the button is clicked
        openStickerContainerButton.addEventListener("click", () => {
            stickerContainer.style.display = 'block';
        });

        // Close the sticker container when a sticker is selected
        stickerContainer.addEventListener("click", (e) => {
            const stickerOption = e.target.closest('.sticker-option');
            if (!stickerOption) return;

            const stickerIndex = stickerOption.getAttribute('data-sticker') - 1;
            const selectedSticker = stickers[stickerIndex];

            // Add selected sticker to the canvas
            stickers.push({
                ...selectedSticker,
                x: window.innerWidth / 2,  // Position it at the center of the canvas
                y: window.innerHeight / 2,
                isActive: false
            });
            drawAllStickers();
            stickerContainer.style.display = 'none';  // Close the container
        });
    </script>
</body>
</html>
